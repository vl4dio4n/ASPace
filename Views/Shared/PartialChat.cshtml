<h5 class="font-weight-bold mb-3 text-center text-lg-start">Chats</h5>

<div class="card chat-contacts-card">
    <div class="card-body overflow-auto" style="max-height: 600px">
        <ul class="list-unstyled mb-0">
            @foreach(var friendInfo in ViewBag.FriendsInfo){
                <li class="p-2 border-bottom" style="border-bottom-color: var(--cream3) !important;">
                    <a href="/Chats/Show?FirstUser=@ViewBag.FirstUser&SecondUser=@friendInfo.UserName" class="d-flex justify-content-between username-link" style="text-decoration: none;">
                        <div class="d-flex flex-row">
                            <div class="pt-1">
                                <p class="fw-bold mb-0">@friendInfo.UserName</p>
                                <p class="small text-muted"><span class="d-inline-block text-truncate" style="max-width: 190px;">@friendInfo.LastMessage</span></p>
                            </div>
                        </div>
                        <div class="pt-1">
                            @if(friendInfo.LastMessage == null){
                                <p class="small text-muted mb-1">Start Chatting</p>
                            } else {
                                <p class="small text-muted mb-1">@friendInfo.Time</p>
                            }
                            @if(friendInfo.UnreadMessages > 0){
                                <span class="badge bg-danger float-end">@friendInfo.UnreadMessages</span>
                            }
                            @* @if(friendInfo.UserName == ViewBag.SecondUser){
                                unreadMessages = friendInfo.UnreadMessages;
                            } *@
                        </div>
                    </a>
                </li>
            }
        </ul>
    </div>
</div>